name: Test Secrets Tokens

on:
  workflow_dispatch:

jobs:
  test-secrets:
    runs-on: ubuntu-latest

    steps:
      - name: Diagnóstico de token
        env:
          RT: ${{ secrets.REFRESH_TOKEN }}
          CID: ${{ secrets.APP_KEY }}
          CS: ${{ secrets.APP_SECRET }}
        run: |
          echo "Len Refresh Token: ${#RT}"
          echo "Len Client ID: ${#CID}"
          echo "Len Client Secret: ${#CS}"

      - name: Test secreto crudo
        env:
          CS: ${{ secrets.APP_SECRET }}
        run: |
          if [ -z "$CS" ]; then
            echo "❌ APP_SECRET está vacío"
          else
            echo "✔ APP_SECRET NO está vacío"
            printf 'Contenido analizado (hex): '
            printf '%s' "$CS" | od -An -tx1
          fi
